
<div  data-controller="vditor--edit-posts" class="mx-auto mt-8 ml-8">
<div class="vditor-container">

  <%= form_with(model: @post, data: { turbo: false }) do |post| %>
    <ul id="errors" class="hidden"></ul>
    <%= post.submit "儲存草稿",name: "draft", data: { method: :patch, action: "click->vditor--edit-posts#update_post" } ,name: "draft", class:"mb-6 bg-indigo-600 text-white inline-block px-4 py-2 mr-4 text-blue-900 border border-blue-900 rounded-md order-blue-500 hover:bg-indigo-700 hover:cursor-pointer hover:text-white" %>
   
  <% if @post.status == "published" %>
    <%= post.submit "下架文章",name: "unpublish", data: { action: "click->vditor--edit-posts#unpublish_post" }, class:"mb-6 bg-indigo-600 text-white inline-block px-4 py-2 mr-4 text-blue-900 border border-blue-900 rounded-md order-blue-500 hover:bg-indigo-700 hover:cursor-pointer hover:text-white" %>
  <% else %>
    <%= post.submit "發佈文章",name: "publish", data: { action: "click->vditor--edit-posts#publish_post" }, class:"mb-6 bg-indigo-600 text-white inline-block px-4 py-2 mr-4 text-blue-900 border border-blue-900 rounded-md order-blue-500 hover:bg-indigo-700 hover:cursor-pointer hover:text-white" %>
  <% end %>
<div class="relative">
    
<div class="relative">
    
    <%= post.text_field :title, class:"rounded-sm h-28 border-0 text-center text-4xl shadow-[0_5px_15px_rgba(0,0,0,0.05)] hover:ring-1", placeholder:"文章標題", autocomplete: "off" %>

    <p  class="absolute select-none top-2 left-2 badge badge-lg"  name="currentState"> <%= @post.status %></p>
    <div class="mt-4">
      <% color = ['slate', 'gray', 'zinc', 'neutral', 'stone', 'red', 'orange', 'amber', 'yellow', 'lime', 'green', 'emerald', 'teal', 'cyan', 'sky', 'blue', 'indigo', 'violet', 'purple', 'fuchsia', 'pink', 'rose'] %>
      
    <% @post.tags.each do |t|%>
      <% random_color = color.sample %>
      <span class="inline-block px-2 py-1 mr-1 text-xs font-semibold uppercase rounded bt-4 text-<%= random_color %>-600 bg-<%= random_color%>-200 last:mr-0">
        <%= t.name  %>
      </span>

    <%end%>
    </div>
    <p>Tags: <%= post.text_field :tag_list, class:"input input-bordered input-xs w-full max-w-xs my-4 " %> </p>

    <div data-post-content="content" class="post_content" >
      <%= @post.content %>
    </div>
  </div>
  <br>
  <div id="vditor" class="edit" ></div>
  <% end %>
</div>

